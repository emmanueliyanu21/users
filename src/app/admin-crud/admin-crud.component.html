<div class="crud-container">
  <div *ngIf="showEditForm">
    <h2>Edit Users</h2>
    <form (ngSubmit)="onSubmit()">
      <div>
        <label for="first_name">First Name:</label>
        <input
          type="text"
          id="first_name"
          [(ngModel)]="record.first_name"
          name="first_name"
          required
        />
      </div>
      <div>
        <label for="last_name">Last Name:</label>
        <input
          type="text"
          id="last_name"
          [(ngModel)]="record.last_name"
          name="last_name"
          required
        />
      </div>
      <div>
        <label for="role">Role:</label>
        <select id="role" [(ngModel)]="record.role" name="role">
          <option value="admin">Admin</option>
          <option value="user">User</option>
          <option value="pending">Pending</option>
        </select>
      </div>
      <button type="submit">Update</button>
    </form>
  </div>

  <h3>Existing Users</h3>
  <ul *ngFor="let user of users">
    <li *ngIf="user.role !== userRole.DEFAULT_ADMIN">
      <span>{{ user.first_name }} {{ user.last_name }} - {{ user.email }}</span>
      <div>
        <button
          class="approve"
          *ngIf="!user.approved && +user.id === +loggedInUser.id + 1"
          (click)="approveRecord(user)"
        >
          Approve
        </button>

        <div *ngIf="user.approved">
          <button
            *ngIf="user.id === loggedInUser.id + 1"
            (click)="editUser(user)"
          >
            Edit
          </button>
          <button
            *ngIf="user.id === loggedInUser.id + 1"
            (click)="deleteRecord(user.first_name)"
          >
            Delete
          </button>
        </div>
      </div>
    </li>
  </ul>

  <div *ngIf="tempMessage" class="temp-message">
    Temporary Key: {{ tempMessage }}
  </div>
</div>
